"use strict";!function(i){i.weui={version:"0.0.1"}}($),function(i){var e=null;i.weui.dialog=function(n){n=i.extend({title:"标题",content:"内容",className:"",buttons:[{label:"确定",type:"primary",onClick:i.noop}]},n);var a=n.buttons.map(function(i){return'<a href="javascript:;" class="weui_btn_dialog '+i.type+'">'+i.label+"</a>"}).join("\n"),t='<div class="'+n.className+'">\n                <div class="weui_mask"></div>\n                <div class="weui_dialog">\n                    <div class="weui_dialog_hd">\n                        <strong class="weui_dialog_title">\n                            '+n.title+'\n                        </strong>\n                    </div>\n                    <div class="weui_dialog_bd">\n                        '+n.content+'\n                    </div>\n                    <div class="weui_dialog_ft">\n                        '+a+"\n                    </div>\n                </div>\n            </div>";e=i(t),i("body").append(e),e.on("click",".weui_btn_dialog",function(){var e=n.buttons[i(this).index()],a=e.onClick||i.noop;a.call(),i.weui.closeDialog()})},i.weui.closeDialog=function(){e&&(e.off("click",".weui_btn_dialog"),e.remove(),e=null)}}($),function(i){i.weui.alert=function(e,n,a){var t="function"==typeof n;t&&(a=n),n=i.extend({title:"警告",content:e||"警告内容",className:"",buttons:[{label:"确定",type:"primary",onClick:a}]},t?{}:n),n.className="weui_dialog_alert "+n.className,i.weui.dialog(n)}}($),function(i){var e=null;i.weui.topTips=function(){var n=arguments.length<=0||void 0===arguments[0]?"topTips":arguments[0],a=arguments[1];if(!e){"number"==typeof a&&(a={duration:a}),a=i.extend({duration:3e3},a);var t='<div class="weui_toptips weui_warn" style="display: block;">'+n+"</div>";e=i(t),i("body").append(e),setTimeout(function(){e.remove(),e=null},a.duration)}}}($),function(i){var e=null;i.weui.actionSheet=function(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],a=n.map(function(i,e){return'<div class="weui_actionsheet_cell">'+i.label+"</div>"}).join(""),t='<div>\n            <div class="weui_mask_transition"></div>\n            <div class="weui_actionsheet">\n                <div class="weui_actionsheet_menu">\n                    '+a+'\n                </div>\n                <div class="weui_actionsheet_action">\n                    <div class="weui_actionsheet_cell">取消</div>\n                </div>\n            </div>\n        </div>';e=i(t),i("body").append(e),e.find(".weui_mask_transition").show().addClass("weui_fade_toggle"),e.find(".weui_actionsheet").addClass("weui_actionsheet_toggle"),e.on("click",".weui_actionsheet .weui_actionsheet_cell",function(){var e=n[i(this).index()],a=e.onClick||i.noop;a.call(),i.weui.hideActionSheet()}).on("click",".weui_mask_transition",function(){i.weui.hideActionSheet()}).on("click",".weui_actionsheet_action .weui_actionsheet_cell",function(){i.weui.hideActionSheet()})},i.weui.hideActionSheet=function(){if(e){var i=e.find(".weui_mask_transition"),n=e.find(".weui_actionsheet");i.removeClass("weui_fade_toggle"),n.removeClass("weui_actionsheet_toggle"),n.on("transitionend",function(){e.remove(),e=null}).on("webkitTransitionEnd",function(){e.remove(),e=null})}}}($),function(i){i.weui.confirm=function(e,n,a,t){var l="function"==typeof n;l&&(t=a,a=n),n=i.extend({title:"确认",content:e||"确认内容",className:"",buttons:[{label:"取消",type:"default",onClick:t||i.noop},{label:"确定",type:"primary",onClick:a||i.noop}]},l?{}:n),i.weui.dialog(n)}}($),function(){function i(i){var e=i[0].getAttribute("required")||i[0].getAttribute("pattern")||"";return e?new RegExp(e).test(i.val())?null:"notMatch":"checkbox"==i[0].getAttribute("type")||"radio"==i[0].getAttribute("type")?i[0].checked?null:"empty":i.val().length?null:"empty"}$.fn.form=function(){return $.each(this,function(e,n){var a=$(n);a.find("[required]").on("blur",function(){var e,n=$(this);if(!(n.val().length<1)&&(e=i(n))){var a=n.attr(e+"Tips")||n.attr("tips")||n.attr("placeholder");a&&$.weui.topTips(a),n.parents(".weui_cell").addClass("weui_cell_warn")}}).on("focus",function(){var i=$(this);i.parents(".weui_cell").removeClass("weui_cell_warn")})}),this},$.fn.validate=function(e){for(var n=$(this).find("[required]"),a=0,t=n.length;t>a;++a){var l=n.eq(a),o=i(l);if(o){e({$dom:l,msg:o});break}}return e(null),this}}(),function(i){var e=null;i.weui.loading=function(){var n=arguments.length<=0||void 0===arguments[0]?"loading...":arguments[0],a='<div class="weui_loading_toast">\n        <div class="weui_mask_transparent"></div>\n        <div class="weui_toast">\n            <div class="weui_loading">\n                <div class="weui_loading_leaf weui_loading_leaf_0"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_1"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_2"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_3"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_4"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_5"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_6"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_7"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_8"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_9"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_10"></div>\n                <div class="weui_loading_leaf weui_loading_leaf_11"></div>\n            </div>\n            <p class="weui_toast_content">'+n+"</p>\n        </div>\n    </div>";e=i(a),i("body").append(e)},i.weui.hideLoading=function(){e&&e.remove(),e=null}}($),function(i){i.fn.progress=function(e){var n=this;e=i.extend({value:0},e),e.value<0&&(e.value=0),e.value>100&&(e.value=100);var a=this.find(".weui_progress_inner_bar");if(0===a.length){var t="function"==typeof e.onClick?'<a href="javascript:;" class="weui_progress_opr">\n                    <i class="weui_icon_cancel"></i>\n                </a>':"",l='<div class="weui_progress">\n                <div class="weui_progress_bar">\n                    <div class="weui_progress_inner_bar" style="width: '+e.value+'%;"></div>\n                </div>\n                '+t+"\n            </div>";return"function"==typeof e.onClick&&this.on("click",".weui_progress_opr",function(){e.onClick.call(n)}),this.html(l)}return a.width(e.value+"%")}}($),function(i){i.weui.toast=function(){var e=arguments.length<=0||void 0===arguments[0]?"toast":arguments[0],n=arguments[1];"number"==typeof n&&(n={duration:n}),n=i.extend({duration:3e3},n);var a='<div>\n            <div class="weui_mask_transparent"></div>\n            <div class="weui_toast">\n                <i class="weui_icon_toast"></i>\n                <p class="weui_toast_content">'+e+"</p>\n            </div>\n        </div>",t=i(a);i("body").append(t),setTimeout(function(){t.remove(),t=null},n.duration)}}($),function(i){i.fn.uploader=function(e){e=i.extend({title:"图片上传",maxCount:4,maxWidth:500,onChange:i.noop},e);var n='<div class="weui_uploader">\n                        <div class="weui_uploader_hd weui_cell">\n                            <div class="weui_cell_bd weui_cell_primary">'+e.title+'</div>\n                            <div class="weui_cell_ft">0/'+e.maxCount+'</div>\n                        </div>\n                        <div class="weui_uploader_bd">\n                            <ul class="weui_uploader_files">\n                            </ul>\n                            <div class="weui_uploader_input_wrp">\n                                <input class="weui_uploader_input" type="file" accept="image/jpg,image/jpeg,image/png,image/gif">\n                            </div>\n                        </div>\n                    </div>';this.html(n);var a=this,t=this.find(".weui_uploader_files"),l=this.find(".weui_uploader_input"),o=0;return l.on("change",function(n){var l=n.target.files;if(0!==l.length)return o>=e.maxCount?void i.weui.alert("最多只能上传"+e.maxCount+"张图片"):void i.each(l,function(i,n){var l=new FileReader;l.onload=function(i){var l=new Image;l.onload=function(){var i=Math.min(e.maxWidth,l.width),s=l.height*(i/l.width),u=document.createElement("canvas"),d=u.getContext("2d");u.width=i,u.height=s,d.drawImage(l,0,0,i,s);var c=u.toDataURL("image/png");t.append('<li class="weui_uploader_file " style="background-image:url('+c+')"></li>'),++o,a.find(".weui_uploader_hd .weui_cell_ft").text(o+"/"+e.maxCount),e.onChange.call(a,{lastModified:n.lastModified,lastModifiedDate:n.lastModifiedDate,name:n.name,size:n.size,type:n.type,data:c})},l.src=i.target.result},l.readAsDataURL(n)})}),this.update=function(i){var e=t.find(".weui_uploader_file").last();e.addClass("weui_uploader_status"),e.html('<div class="weui_uploader_status_content">'+i+"%</div>")},this.success=function(){var i=t.find(".weui_uploader_file").last();i.removeClass("weui_uploader_status"),i.html("")},this.error=function(){var i=t.find(".weui_uploader_file").last();i.addClass("weui_uploader_status"),i.html('<div class="weui_uploader_status_content"><i class="weui_icon_warn"></i></div>')},this}}($);